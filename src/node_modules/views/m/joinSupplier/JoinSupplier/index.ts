import * as tomato from "@po-to/tomato";
import * as project from "views/global/common/Project";
import * as funs from "views/global/common/Funs";
import * as model from "views/global/common/Model";
import * as tdom from "@po-to/tomato-jquery";

class VPresenter extends project.VPresenter {
    constructor(view: tomato.VPView, parent?: tomato.VPresenter, vpid?: string) {
        super(view, parent, vpid);
        this._watchEvent();
        //this._els = this._getElements();
    }
    private _evt_joinLogin() {
        if (1 == model.globalData.user.user_type) {
            funs.tip("您尚未加盟，请点击立即加盟！", "", "fail");
        } else {
            tomato.getVPresenter<tomato.VPresenter>(funs.moduleToUrl('m/user/LoginForm'), (LoginForm) => {
                //登录窗
                tdom.open(LoginForm, tdom.DialogTarget.Blank, {
                    size: { width: '90%', height: tomato.DialogSize.Content },
                    effect: tdom.DialogEffect.scale,
                    masked: true
                });
            })
        }
    }
}
export = VPresenter;