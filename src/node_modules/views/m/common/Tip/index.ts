import * as tomato from "@po-to/tomato";
import * as tdom from "@po-to/tomato-jquery";
import * as project from "views/global/common/Project";
import * as funs from "views/global/common/Funs";
import * as model from "views/global/common/Model";
import * as api from "views/global/common/API";

class VPresenter extends project.VPresenter {
    constructor(view: tomato.VPView, parent?: tomato.VPresenter, vpid?: string) {
        super(view, parent, vpid);
        this._watchEvent();
        this._els = this._getElements();
        let that = this;

    }
    public setTip = function (title, note, type) {
        /*
             title: 必填； －－提示信息标题；
             note:选填； －－提示信息详情；
             type:选填；("succ":成功提示－绿色对勾图标, "fail": 错误提示－红色叉叉图标)，默认"succ"
        */
        let tipTitle = this.find('.tip-title');
        let tipNote = this.find('.tip-note');
        let tipType = tipTitle.find('span');
        let that = this;
        //如果没有详细信息，则调整界面显示
        if (note == '') {
            tipTitle.addClass('just-title');
            tipNote.hide();
        } else {
            tipTitle.removeClass('just-title');
            tipNote.html(note).show();
        }
        //如果是错误提示，则更改icon
        if (type == 'fail') {
            tipType[0].className = 'icon-x';
        } else {
            tipType[0].className = 'icon-checkmark';
        }
        tipTitle.find('i').html(title);
        //3秒关闭提示框
        setTimeout(function () {
            (that.parent as tomato.Dialog).close();
        }, 3000);
    }
}
export = VPresenter;